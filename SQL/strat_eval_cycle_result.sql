select @SELECT:DIM:USER_DEF:IMPLIED:ITEM:X.DimID:Dimension@  
, @SELECT:DIM_PROP:USER_DEF:IMPLIED:ITEM:X.IntID:IntID@  
, @SELECT:DIM_PROP:USER_DEF:IMPLIED:ITEM:X.Code:Code@  
, @SELECT:DIM_PROP:USER_DEF:IMPLIED:ITEM:X.Name:Name@  
, @SELECT:DIM_PROP:USER_DEF:IMPLIED:ITEM:X.CycleID:CycleID@  
, @SELECT:DIM_PROP:USER_DEF:IMPLIED:ITEM:X.CycleName:CycleName@  
, @SELECT:DIM_PROP:USER_DEF:IMPLIED:ITEM:X.DimensionID:DimensionID@  
, @SELECT:DIM_PROP:USER_DEF:IMPLIED:ITEM:X.DimensionName:DimensionName@  
, @SELECT:DIM_PROP:USER_DEF:IMPLIED:ITEM:X.AttributeName:AttributeName@  
, @SELECT:DIM_PROP:USER_DEF:IMPLIED:ITEM:X.InvestmentEvaluation:InvestmentEvaluation@  
, @SELECT:DIM_PROP:USER_DEF:IMPLIED:ITEM:X.Alignment:Alignment@  
, @SELECT:DIM_PROP:USER_DEF:IMPLIED:ITEM:X.IsInvestment:IsInvestment@  
, @SELECT:DIM_PROP:USER_DEF:IMPLIED:ITEM:X.IsMetric:IsMetric@  
, @SELECT:DIM_PROP:USER_DEF:IMPLIED:ITEM:X.odf_object_code:odf_object_code@  
, @SELECT:DIM_PROP:USER_DEF:IMPLIED:ITEM:X.hg_has_children:hg_has_children@  
FROM (
	select I.ODF_PK @+@ I.UNIQUE_CODE DimID,I.ODF_PK IntID,I.UNIQUE_CODE Code,I.NAME Name,SC.ID CycleID,SC.NAME CycleName,SD.ID DimensionID,SD.Name DimensionName,CAP1.Name AttributeName,null InvestmentEvaluation,sum(SE.WeightedEval) Alignment,1 IsInvestment,0 IsMetric,I.odf_object_code odf_object_code,I.ODF_PK hg_has_children  
	FROM  ODF_CA_STRAT_EVALUATION SE	  
		INNER   JOIN ODF_INV_V2 I ON I.ODF_PK = SE.INVESTMENTID	  
		INNER   JOIN ODF_CA_STRAT_EVAL_CYCLE SC ON SC.ID = SE.CYCLEID	  
		INNER   JOIN ODF_CA_STRAT_DIM SD ON SD.ID = SC.STRAT_DIMENSION	  
		INNER   JOIN ODF_CUSTOM_ATTRIBUTES OA ON OA.OBJECT_NAME='inv'   AND   OA.INTERNAL_NAME = SD.TARGET_ATTRIBUTE	  
		INNER   JOIN CMN_CAPTIONS_NLS CAP1 ON CAP1.TABLE_NAME = 'ODF_CUSTOM_ATTRIBUTES' 		  AND   CAP1.LANGUAGE_CODE = @WHERE:PARAM:LANGUAGE@ 		  AND   CAP1.PK_ID = OA.ID  
		WHERE   SE.CYCLEID = @WHERE:PARAM:USER_DEF:INTEGER:CYCLEID@  AND   @NVL@(@WHERE:PARAM:USER_DEF:INTEGER:hg_row_id@,0)=0  
		GROUP BY   I.ODF_PK,I.UNIQUE_CODE,I.NAME,SC.ID,SC.NAME,SD.ID,SD.Name,CAP1.Name, I.odf_object_code  
		
	UNION  
	select I.ODF_PK @+@ SE.ID DimID,SM.ID IntID,SM.CODE Code,SM.NAME Name,SC.ID CycleID,SC.NAME CycleName,SD.ID DimensionID,SD.Name DimensionName,CAP1.Name AttributeName,SE.INVEVALUATION InvestmentEvaluation,SE.WeightedEval Alignment,0 IsInvestment,1 IsMetric,null odf_object_code,null hg_has_children  
	FROM  ODF_CA_STRAT_EVALUATION SE	  
		INNER   JOIN ODF_CA_STRAT_ALIGN_METRIC SM ON SM.ID = SE.METRICID	  
		INNER   JOIN ODF_INV_V2 I ON I.ODF_PK = SE.INVESTMENTID	  
		INNER   JOIN ODF_CA_STRAT_EVAL_CYCLE SC ON SC.ID = SE.CYCLEID	  
		INNER   JOIN ODF_CA_STRAT_DIM SD ON SD.ID = SC.STRAT_DIMENSION	  
		INNER   JOIN ODF_CUSTOM_ATTRIBUTES OA ON OA.OBJECT_NAME='inv'   AND   OA.INTERNAL_NAME = SD.TARGET_ATTRIBUTE	  
		INNER   JOIN CMN_CAPTIONS_NLS CAP1 ON CAP1.TABLE_NAME = 'ODF_CUSTOM_ATTRIBUTES' 		  AND   CAP1.LANGUAGE_CODE = @WHERE:PARAM:LANGUAGE@ 		  AND   CAP1.PK_ID = OA.ID  
		WHERE   SE.CYCLEID = @WHERE:PARAM:USER_DEF:INTEGER:CYCLEID@  AND   SE.INVESTMENTID = @WHERE:PARAM:USER_DEF:INTEGER:hg_row_id@  AND   @NVL@(SE.INVEVALUATION,0) != 0
) X  
WHERE   @FILTER@